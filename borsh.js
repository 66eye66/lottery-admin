/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/@coral-xyz/borsh@0.31.0/dist/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.struct=exports.f64=exports.f32=exports.i32=exports.u32=exports.i16=exports.u16=exports.i8=exports.u8=void 0,exports.u64=u64,exports.i64=i64,exports.u128=u128,exports.i128=i128,exports.u256=u256,exports.i256=i256,exports.publicKey=publicKey,exports.option=option,exports.bool=bool,exports.vec=vec,exports.tagged=tagged,exports.vecU8=vecU8,exports.str=str,exports.rustEnum=rustEnum,exports.array=array,exports.map=map;const buffer_layout_1=require("buffer-layout"),web3_js_1=require("@solana/web3.js"),bn_js_1=__importDefault(require("bn.js"));var buffer_layout_2=require("buffer-layout");Object.defineProperty(exports,"u8",{enumerable:!0,get:function(){return buffer_layout_2.u8}}),Object.defineProperty(exports,"i8",{enumerable:!0,get:function(){return buffer_layout_2.s8}}),Object.defineProperty(exports,"u16",{enumerable:!0,get:function(){return buffer_layout_2.u16}}),Object.defineProperty(exports,"i16",{enumerable:!0,get:function(){return buffer_layout_2.s16}}),Object.defineProperty(exports,"u32",{enumerable:!0,get:function(){return buffer_layout_2.u32}}),Object.defineProperty(exports,"i32",{enumerable:!0,get:function(){return buffer_layout_2.s32}}),Object.defineProperty(exports,"f32",{enumerable:!0,get:function(){return buffer_layout_2.f32}}),Object.defineProperty(exports,"f64",{enumerable:!0,get:function(){return buffer_layout_2.f64}}),Object.defineProperty(exports,"struct",{enumerable:!0,get:function(){return buffer_layout_2.struct}});class BNLayout extends buffer_layout_1.Layout{constructor(e,t,r){super(e,r),this.blob=(0,buffer_layout_1.blob)(e),this.signed=t}decode(e,t=0){const r=new bn_js_1.default(this.blob.decode(e,t),10,"le");return this.signed?r.fromTwos(8*this.span).clone():r}encode(e,t,r=0){return this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),t,r)}}function u64(e){return new BNLayout(8,!1,e)}function i64(e){return new BNLayout(8,!0,e)}function u128(e){return new BNLayout(16,!1,e)}function i128(e){return new BNLayout(16,!0,e)}function u256(e){return new BNLayout(32,!1,e)}function i256(e){return new BNLayout(32,!0,e)}class WrappedLayout extends buffer_layout_1.Layout{constructor(e,t,r,u){super(e.span,u),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}}function publicKey(e){return new WrappedLayout((0,buffer_layout_1.blob)(32),(e=>new web3_js_1.PublicKey(e)),(e=>e.toBuffer()),e)}class OptionLayout extends buffer_layout_1.Layout{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(0,buffer_layout_1.u8)()}encode(e,t,r=0){return null==e?this.discriminator.encode(0,t,r):(this.discriminator.encode(1,t,r),this.layout.encode(e,t,r+1)+1)}decode(e,t=0){const r=this.discriminator.decode(e,t);if(0===r)return null;if(1===r)return this.layout.decode(e,t+1);throw new Error("Invalid option "+this.property)}getSpan(e,t=0){const r=this.discriminator.decode(e,t);if(0===r)return 1;if(1===r)return this.layout.getSpan(e,t+1)+1;throw new Error("Invalid option "+this.property)}}function option(e,t){return new OptionLayout(e,t)}function bool(e){return new WrappedLayout((0,buffer_layout_1.u8)(),decodeBool,encodeBool,e)}function decodeBool(e){if(0===e)return!1;if(1===e)return!0;throw new Error("Invalid bool: "+e)}function encodeBool(e){return e?1:0}function vec(e,t){const r=(0,buffer_layout_1.u32)("length"),u=(0,buffer_layout_1.struct)([r,(0,buffer_layout_1.seq)(e,(0,buffer_layout_1.offset)(r,-r.span),"values")]);return new WrappedLayout(u,(({values:e})=>e),(e=>({values:e})),t)}function tagged(e,t,r){const u=(0,buffer_layout_1.struct)([u64("tag"),t.replicate("data")]);return new WrappedLayout(u,(function({tag:t,data:r}){if(!t.eq(e))throw new Error("Invalid tag, expected: "+e.toString("hex")+", got: "+t.toString("hex"));return r}),(t=>({tag:e,data:t})),r)}function vecU8(e){const t=(0,buffer_layout_1.u32)("length"),r=(0,buffer_layout_1.struct)([t,(0,buffer_layout_1.blob)((0,buffer_layout_1.offset)(t,-t.span),"data")]);return new WrappedLayout(r,(({data:e})=>e),(e=>({data:e})),e)}function str(e){return new WrappedLayout(vecU8(),(e=>e.toString("utf-8")),(e=>Buffer.from(e,"utf-8")),e)}function rustEnum(e,t,r){const u=(0,buffer_layout_1.union)(null!=r?r:(0,buffer_layout_1.u8)(),t);return e.forEach(((e,t)=>u.addVariant(t,e,e.property))),u}function array(e,t,r){const u=(0,buffer_layout_1.struct)([(0,buffer_layout_1.seq)(e,t,"values")]);return new WrappedLayout(u,(({values:e})=>e),(e=>({values:e})),r)}class MapEntryLayout extends buffer_layout_1.Layout{constructor(e,t,r){super(e.span+t.span,r),this.keyLayout=e,this.valueLayout=t}decode(e,t){t=t||0;return[this.keyLayout.decode(e,t),this.valueLayout.decode(e,t+this.keyLayout.getSpan(e,t))]}encode(e,t,r){r=r||0;const u=this.keyLayout.encode(e[0],t,r);return u+this.valueLayout.encode(e[1],t,r+u)}getSpan(e,t){return this.keyLayout.getSpan(e,t)+this.valueLayout.getSpan(e,t)}}function map(e,t,r){const u=(0,buffer_layout_1.u32)("length"),o=(0,buffer_layout_1.struct)([u,(0,buffer_layout_1.seq)(new MapEntryLayout(e,t),(0,buffer_layout_1.offset)(u,-u.span),"values")]);return new WrappedLayout(o,(({values:e})=>new Map(e)),(e=>({values:Array.from(e.entries())})),r)}
//# sourceMappingURL=/sm/87b91bcdb5ba8bca99154dcddef4a864769a6a1fff592152e423518008cd7b6c.map
